<!DOCTYPE html>
<html>
	<head>
		<!-- meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
	
		<!-- nada que ver aca -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		<link rel="stylesheet" href="customcss/stylesheet.css" />
		<title>Ahorcado jiji</title>
	</head>
<body>
	<div>
		<div class="container">
			<div class="header">
				<h1 class="header">Inserte Palabra</h1>
			</div>
		</div>
		<div class="ipalabra">
			<input id="palabra" name="palabra" onkeyup="EnableDisablesg()" type="text">
			<button class="btn btn-primary" id="startgame" onclick="startgame()" name="startgame" disabled="disabled">Iniciar</button>
		</div>
		<div class="imagen">
			<img alt="ahorcado" style="width: 480px; height: 360px;" id="imagedisplay" src="img/1.png">
		</div>
		<div class="pescondida">
			<h2 class="hw" id="hidenword"> </h2>
		</div>
		<div class="inspal">
			<p>Inserta una letra</p>
		</div>
		<div class="bletra">
			<input id="letra" name="letra" onkeyup="EnableDisableb()" disabled="disabled" maxlength="1" type="text">
			<button class="btn btn-primary" id="buscar" onclick="buscarletra()" name="buscarletra" disabled="disabled">Buscar</button>
		</div>
		<div class="result">
			<h1 class="wol" id="wol"> </h1>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
<script>
var resultado=0;
var gameword="";
var palabraj="";
var gamewordaux="";
var letraj="";
var errores=1;
//funcion para que habilite el boton de iniciar al ingresar una letra
function EnableDisablesg() {
	var startgame=document.getElementById("startgame");
		
	if (palabra.value.trim() !="") {
		startgame.disabled=false;
	} else {
		startgame.disabled=true;
	}
}
//misma funcion para el boton de Buscar
function EnableDisableb() {
	var buscarletra=document.getElementById("buscar");

	if (letra.value.trim() !="") {
		buscar.disabled=false;
	} else {
		buscar.disabled=true;
	}
}
//accion simple para que presione el boton de Iniciar al apretar enter en la casilla palabra
var inputip = document.getElementById("palabra");

  
inputip.addEventListener("keyup", (event) => {
    if (event.key === "Enter") {
        event.preventDefault();
        document.getElementById("startgame").click();
    }
})
//funcion de inicio de juego
function startgame(){
	palabraj = document.getElementById("palabra").value;
	startgame.disabled=true;
	palabra.value="";
	palabra.disabled=true;
	letra.disabled=false;
	resultado=0;
	gameword="";
	gamewordaux="";
	letraj="";
	errores=1;
	document.getElementById("imagedisplay").src = "img/1.png";
	document.getElementById("wol").innerHTML = "";
	for(i=0; i<palabraj.length; i++) {
		if (palabraj[i]===" "){
			gameword+=" ";
		} else {
			gameword+="*";
		}
	}
	document.getElementById("hidenword").innerHTML = gameword;
	
}
//accion simple para que presione el boton de buscar al apretar enter en la casilla letra
var inputbl = document.getElementById("letra");

  
inputbl.addEventListener("keyup", (event) => {
    if (event.key === "Enter") {
        event.preventDefault();
        document.getElementById("buscar").click();
    }
})
//Funcion para buscar letra en la/s palabra/s y todo el desarrollo del juego
function buscarletra(){
	if (errores<8){
		gamewordaux=gameword;
		letraj = document.getElementById("letra").value;
		for (var i=0; i<palabraj.length; i++) {
			if (palabraj[i]===letraj){
				gameword=gameword.replaceAt(i,letraj);
			}
		}
		if (gameword===gamewordaux){
			errores=errores+1;
			document.getElementById("imagedisplay").src = "img/"+errores+".png";
		}
		letra.value="";
		document.getElementById("hidenword").innerHTML = gameword;
		if (gameword===palabraj){
			resultado=1;
		}
	} else if (errores===8) {
		resultado=2;
	}
	if (resultado===1){
		document.getElementById("wol").innerHTML = "Ganaste :)"
		buscar.disabled=true;
		palabra.disabled=false;
		letra.disabled=true;
		
	} else if (resultado===2){
		document.getElementById("wol").innerHTML = "Perdiste :("
		buscar.disabled=true;
		palabra.disabled=false;
		letra.disabled=true;
	}
}
//string prototype para reemplazar caracteres de un string
String.prototype.replaceAt = function(index, replacement) {
    return this.substr(0, index) + replacement + this.substr(index + replacement.length);
}
</script>
</html>
